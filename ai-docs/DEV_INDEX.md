# Res-Downloader äºŒæ¬¡å¼€å‘æ–‡æ¡£ç´¢å¼•

> ğŸ“š å®Œæ•´çš„ res-downloader äºŒæ¬¡å¼€å‘æŒ‡å—,ä»å…¥é—¨åˆ°ç²¾é€šã€‚

---

## ğŸ“– æ–‡æ¡£å¯¼èˆª

### ğŸš€ å¿«é€Ÿå¼€å§‹

| æ–‡æ¡£ | è¯´æ˜ | é€‚ç”¨å¯¹è±¡ |
|------|------|----------|
| **[DEV_GUIDE.md](./DEV_GUIDE.md)** | æ€»ä½“æ¶æ„ä¸æ ¸å¿ƒæ¦‚å¿µ | æ‰€æœ‰å¼€å‘è€… |

### ğŸ”§ æŠ€æœ¯æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ | é€‚ç”¨å¯¹è±¡ |
|------|------|----------|
| **[DEV_PLUGIN_DEV.md](./DEV_PLUGIN_DEV.md)** | æ’ä»¶å¼€å‘å®Œæ•´æŒ‡å— | æƒ³è¦æ–°å¢å¹³å°æ”¯æŒçš„å¼€å‘è€… |
| **[DEV_API_REFERENCE.md](./DEV_API_REFERENCE.md)** | API æ¥å£å®Œæ•´å‚è€ƒ | å‰åç«¯è”è°ƒå¼€å‘è€… |
| **[DEV_DEPLOYMENT.md](./DEV_DEPLOYMENT.md)** | ç¼–è¯‘æ‰“åŒ…ä¸å‘å¸ƒæŒ‡å— | æ‰“åŒ…å‘å¸ƒäººå‘˜ |
| **[DEV_TROUBLESHOOTING.md](./DEV_TROUBLESHOOTING.md)** | å¸¸è§é—®é¢˜æ’æŸ¥æŒ‡å— | æ‰€æœ‰é—®é¢˜æ’æŸ¥ |

---

## ğŸ¯ æŒ‰åœºæ™¯æŸ¥æ‰¾

### åœºæ™¯ 1: æˆ‘æƒ³ç†è§£é¡¹ç›®æ•´ä½“æ¶æ„

ğŸ‘‰ é˜…è¯» [DEV_GUIDE.md](./DEV_GUIDE.md)

**å†…å®¹æ¦‚è§ˆ**:
- é¡¹ç›®å®šä½ä¸æŠ€æœ¯æ ˆ
- æ•´ä½“æ¶æ„è®¾è®¡
- æ ¸å¿ƒæ¨¡å—è¯´æ˜
- æ•°æ®æµå‘åˆ†æ

---

### åœºæ™¯ 2: æˆ‘æƒ³æ·»åŠ æ–°çš„è§†é¢‘å¹³å°æ”¯æŒ

ğŸ‘‰ é˜…è¯» [DEV_PLUGIN_DEV.md](./DEV_PLUGIN_DEV.md)

**å…³é”®æ­¥éª¤**:
1. åˆ›å»º Plugin å®ç°æ–‡ä»¶
2. å®ç° `Plugin` æ¥å£
3. åœ¨ `proxy.go` ä¸­æ³¨å†Œ
4. æµ‹è¯•éªŒè¯

**ä»£ç ç¤ºä¾‹**:
```go
type YourPlugin struct {
    bridge *shared.Bridge
}

func (p *YourPlugin) Domains() []string {
    return []string{"example.com"}
}

func (p *YourPlugin) OnResponse(resp *http.Response, ctx *goproxy.ProxyCtx) *http.Response {
    // èµ„æºæå–é€»è¾‘
    return nil
}
```

---

### åœºæ™¯ 3: æˆ‘æƒ³ä¿®æ”¹å‰ç«¯ç•Œé¢

ğŸ‘‰ é˜…è¯» [DEV_GUIDE.md](./DEV_GUIDE.md) çš„ **å‰ç«¯æ¨¡å—** ç« èŠ‚

**ç›¸å…³æ–‡ä»¶**:
- `frontend/src/views/index.vue` - ä¸»é¡µé¢
- `frontend/src/views/setting.vue` - è®¾ç½®é¡µé¢
- `frontend/src/components/` - ç»„ä»¶åº“

**ç¤ºä¾‹**:
```typescript
// ä¿®æ”¹èµ„æºåˆ—è¡¨åˆ—
const columns = ref([...])
```

---

### åœºæ™¯ 4: æˆ‘æƒ³æ·»åŠ æ–°çš„ API æ¥å£

ğŸ‘‰ é˜…è¯» [DEV_API_REFERENCE.md](./DEV_API_REFERENCE.md)

**æ­¥éª¤**:
1. åœ¨ `core/http.go` ä¸­æ·»åŠ å¤„ç†å‡½æ•°
2. åœ¨ `HandleApi` ä¸­æ³¨å†Œè·¯ç”±
3. åœ¨å‰ç«¯ `api/app.ts` ä¸­å°è£…è°ƒç”¨

---

### åœºæ™¯ 5: æˆ‘æƒ³æ‰“åŒ…å‘å¸ƒåº”ç”¨

ğŸ‘‰ é˜…è¯» [DEV_DEPLOYMENT.md](./DEV_DEPLOYMENT.md)

**å¹³å°æ”¯æŒ**:
- âœ… Windows (x86_64)
- âœ… macOS (x86_64, ARM64)
- âœ… Linux (x86_64)

**å…³é”®æ­¥éª¤**:
```bash
# 1. æ„å»º
wails build

# 2. ç­¾å (å¯é€‰)
# 3. å…¬è¯ (macOS å¿…é¡»)
# 4. å‘å¸ƒ
```

---

### åœºæ™¯ 6: é‡åˆ°äº†ç¼–è¯‘/è¿è¡Œé—®é¢˜

ğŸ‘‰ é˜…è¯» [DEV_TROUBLESHOOTING.md](./DEV_TROUBLESHOOTING.md)

**å¸¸è§é—®é¢˜**:
- HTTPS èµ„æºæ— æ³•æ‹¦æˆª
- ç³»ç»Ÿä»£ç†è®¾ç½®å¤±è´¥
- å‰ç«¯æ”¶ä¸åˆ°åç«¯äº‹ä»¶
- ä¸‹è½½é€Ÿåº¦æ…¢
- å¹³å°ç‰¹å®šé—®é¢˜

---

## ğŸ—‚ï¸ æ ¸å¿ƒæ–‡ä»¶é€ŸæŸ¥è¡¨

### Go åç«¯

| æ–‡ä»¶ | ä½œç”¨ | ä¿®æ”¹é¢‘ç‡ |
|------|------|----------|
| `main.go` | åº”ç”¨å…¥å£, Wails é…ç½® | ä½ |
| `core/app.go` | åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç† | ä½ |
| `core/proxy.go` | ä»£ç†æœåŠ¡å™¨æ ¸å¿ƒ | ä¸­ |
| `core/http.go` | HTTP API æœåŠ¡ | é«˜ |
| `core/resource.go` | èµ„æºç®¡ç† | ä¸­ |
| `core/downloader.go` | ä¸‹è½½å™¨ | ä¸­ |
| `core/config.go` | é…ç½®ç®¡ç† | ä¸­ |
| `core/plugins/*.go` | å¹³å°æ’ä»¶ | é«˜ |
| `core/rule.go` | åŸŸåè§„åˆ™ | ä½ |
| `core/shared/plugin.go` | Plugin æ¥å£å®šä¹‰ | ä½ |

### Vue å‰ç«¯

| æ–‡ä»¶ | ä½œç”¨ | ä¿®æ”¹é¢‘ç‡ |
|------|------|----------|
| `frontend/src/main.ts` | åº”ç”¨å…¥å£ | ä½ |
| `frontend/src/router/index.ts` | è·¯ç”±é…ç½® | ä¸­ |
| `frontend/src/stores/event.ts` | äº‹ä»¶å¤„ç† | ä¸­ |
| `frontend/src/views/index.vue` | ä¸»é¡µé¢ | é«˜ |
| `frontend/src/views/setting.vue` | è®¾ç½®é¡µé¢ | ä¸­ |
| `frontend/src/api/app.ts` | API å°è£… | ä¸­ |

---

## ğŸ“Š é¡¹ç›®æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¡Œé¢åº”ç”¨ (Wails)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Vue 3 å‰ç«¯ (127.0.0.1:34115)       â”‚    â”‚
â”‚  â”‚  - èµ„æºåˆ—è¡¨å±•ç¤º (index.vue)                      â”‚    â”‚
â”‚  â”‚  - è®¾ç½®ç®¡ç† (setting.vue)                        â”‚    â”‚
â”‚  â”‚  - äº‹ä»¶ç›‘å¬ (stores/event.ts)                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                â”‚ Wails Bridge                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Go åç«¯ (127.0.0.1:8899)            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚         Proxy Server (goproxy)          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  - æ‹¦æˆª HTTP/HTTPS è¯·æ±‚                 â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  - MITM ä¸­é—´äººæ”»å‡»                       â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                 â”‚                                â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚         Plugin System                   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  - QQ Plugin (å¾®ä¿¡è§†é¢‘å·)                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  - Default Plugin (é€šç”¨)                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  - YourPlugin (è‡ªå®šä¹‰)                  â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                 â”‚                                â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚         Resource Manager                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  - èµ„æºæå–ä¸æ ‡è®°                        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  - å¤šçº¿ç¨‹ä¸‹è½½ (downloader.go)            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  - è¿›åº¦å›è°ƒ                               â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  ç³»ç»Ÿä»£ç†è®¾ç½®  â”‚
                  â”‚  (HTTP/HTTPS) â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚      å¤–éƒ¨ç½‘ç»œæµé‡        â”‚
                  â”‚  (æµè§ˆå™¨ã€App çš„è¯·æ±‚)    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ å¼€å‘å·¥ä½œæµ

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/putyy/res-downloader.git
cd res-downloader

# å®‰è£…ä¾èµ–
cd frontend && npm install && cd ..

# å¯åŠ¨å¼€å‘æ¨¡å¼
wails dev
```

### 2. å¼€å‘è°ƒè¯•

```bash
# ç»ˆç«¯ 1: å¯åŠ¨åç«¯ + å‰ç«¯
wails dev

# ç»ˆç«¯ 2: æŸ¥çœ‹æ—¥å¿—
tail -f ~/Library/Logs/res-downloader/*.log

# æµè§ˆå™¨å¼€å‘è€…å·¥å…·
# å‰ç«¯è¿è¡Œåœ¨: http://localhost:34115
```

### 3. æµ‹è¯•éªŒè¯

```bash
# 1. å¼€å¯ä»£ç†
# ç‚¹å‡»åº”ç”¨ç•Œé¢"å¯åŠ¨ä»£ç†"æŒ‰é’®

# 2. è®¾ç½®ç³»ç»Ÿä»£ç†
# æ‰‹åŠ¨è®¾ç½®: 127.0.0.1:8899

# 3. è®¿é—®ç›®æ ‡ç½‘ç«™
# æ‰“å¼€æµè§ˆå™¨,æ’­æ”¾è§†é¢‘

# 4. æ£€æŸ¥èµ„æº
# æŸ¥çœ‹åº”ç”¨ç•Œé¢æ˜¯å¦å‡ºç°èµ„æº
```

### 4. æ„å»ºæ‰“åŒ…

```bash
# å•å¹³å°æ„å»º
wails build

# è·¨å¹³å°æ„å»º(å‚è€ƒ DEV_DEPLOYMENT.md)
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æäº¤ä»£ç 

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯: `git checkout -b feature/your-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add some feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/your-feature`
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

#### Go ä»£ç 

```go
// 1. å¯¼å…¥åˆ†ç»„
import (
    // æ ‡å‡†åº“
    "fmt"
    "net/http"

    // ç¬¬ä¸‰æ–¹åº“
    "github.com/elazarl/goproxy"

    // é¡¹ç›®å†…éƒ¨
    "res-downloader/core/shared"
)

// 2. é”™è¯¯å¤„ç†
if err != nil {
    return fmt.Errorf("operation failed: %w", err)
}

// 3. æ—¥å¿—
globalLogger.Info().Msgf("Processing: %s", url)
globalLogger.Err().Msgf("Error: %v", err)
```

#### Vue ä»£ç 

```typescript
// 1. ç»„ä»¶å‘½å
// PascalCase
export default defineComponent({
  name: 'ComponentName'
})

// 2. Props å®šä¹‰
interface Props {
  modelValue: string
  disabled?: boolean
}

// 3. äº‹ä»¶å‘½å
// kebab-case
emit('update:modelValue', newValue)
emit('custom-event', data)
```

---

## ğŸ“š å¤–éƒ¨èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [Wails æ–‡æ¡£](https://wails.io/docs/introduction)
- [goproxy æ–‡æ¡£](https://github.com/elazarl/goproxy)
- [Vue 3 æ–‡æ¡£](https://cn.vuejs.org/)
- [Naive UI æ–‡æ¡£](https://www.naiveui.com/)

### ç›¸å…³å·¥å…·

- [Go å®˜ç½‘](https://go.dev/)
- [Node.js å®˜ç½‘](https://nodejs.org/)
- [Visual Studio Code](https://code.visualstudio.com/)

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v3.1.3 (å½“å‰ç‰ˆæœ¬)

- âœ¨ æ–°å¢ URL æœç´¢åŠŸèƒ½
- ğŸ› ä¿®å¤ä»£ç†é…ç½®é—®é¢˜
- âš¡ ä¼˜åŒ–åŸŸåè§„åˆ™åŒ¹é…
- ğŸ“ æ›´æ–°æ–‡æ¡£

### å†å²ç‰ˆæœ¬

æŸ¥çœ‹ [GitHub Releases](https://github.com/putyy/res-downloader/releases)

---

## â“ è·å–å¸®åŠ©

### å®˜æ–¹æ¸ é“

- [GitHub Issues](https://github.com/putyy/res-downloader/issues)
- [çˆ±äº«è®ºå›](https://s.gowas.cn/d/4089)

### ç¤¾åŒº

- [äº¤æµç¾¤](https://www.putyy.com/app/admin/upload/img/20250418/6801d9554dc7.webp)
- å¾®ä¿¡: `AmorousWorld` (å¤‡æ³¨ "github")

---

**æ–‡æ¡£ç‰ˆæœ¬**: v3.1.3
**æœ€åæ›´æ–°**: 2026-01-28
**ç»´æŠ¤è€…**: res-downloader å›¢é˜Ÿ
